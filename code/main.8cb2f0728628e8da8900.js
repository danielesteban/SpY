(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{"/LCC":function(t,e,n){"use strict";n("MZFn");var f=n("Womt");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var l=function(t){function o(){var t,e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=this,(t=!(n=c(o).call(this,60,1,.1,2048))||"object"!==i(n)&&"function"!=typeof n?s(e):n).distance=5,t.maxHeight=1/0,t.offset=1.2,t.tilt=-.45*Math.PI,t.pitch=.1*Math.PI,t.speed=1.25,t.step=new f.Y,t.root=new f.D,t.root.add(s(s(t))),t.updateOrbit(),t}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(o,f["F"]),e=o,(n=[{key:"onAnimationTick",value:function(t){var e=t.delta,n=this.root.position,o=this.speed,r=this.step,i=this.target;!i||n.distanceTo(i)<=.1||(r.copy(i).sub(n).normalize().multiplyScalar(e*o),n.add(r))}},{key:"processInput",value:function(t){var e=t.movement,n=t.secondary,o=t.wheel,r=!1;if(n){this.tilt-=.003*e.x,this.pitch+=.003*e.y,this.pitch=Math.min(Math.max(this.pitch,-.45*Math.PI),.45*Math.PI),r=!0}if(o){this.distance=Math.min(Math.max(this.distance+.006*o,1),16),r=!0}return r&&this.updateOrbit(),r}},{key:"updateOrbit",value:function(){var t=this.distance,e=this.maxHeight,n=this.offset,o=this.pitch,r=this.position,i=this.root,a=this.tilt;r.set(Math.cos(a)*Math.cos(o),Math.sin(o),Math.sin(-a)*Math.cos(o)).normalize().multiplyScalar(t),r.y=Math.min(Math.max(r.y,.1-n),e-n),this.lookAt(i.position),r.y+=n}}])&&a(e.prototype,n),r&&a(e,r),o}(),p=n("seR1");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(t){function s(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.background,o=void 0===n?new f.m(16777215):n,r=e.size,i=void 0===r?1:r,a=e.subdivisions,c=void 0===a?10:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var u=new f.j(128,8);return u.translate(0,0,-.01),u.rotateX(-.5*Math.PI),(t=h(this,y(s).call(this,u,new p.a({size:i,subdivisions:c})))).material.color.set(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(s,f["z"]),s}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function v(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.color,o=void 0===n?16777215:n,r=d(e,["color"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var i=f.O.basic.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","attribute vec3 offset;"].join("\n")).replace("#include <begin_vertex>",["vec3 transformed = vec3(position + offset);"].join("\n"));return(t=v(this,w(a).call(this,function(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o})}return r}({name:"rain-material",uniforms:f.W.clone(f.O.basic.uniforms),fragmentShader:f.O.basic.fragmentShader,vertexShader:i,fog:!0},r)))).color=t.uniforms.diffuse.value,t.color.set(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(a,f["P"]),a}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function S(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var e=(new f.h).fromGeometry(new f.f(.01,.5,.01).translate(0,.25,0)).attributes.position.array,n=new Float32Array(3*u.numDrops),o=new f.v;o.addAttribute("position",new f.g(e,3)),o.addAttribute("offset",new f.u(n,3).setDynamic(!0)),(t=S(this,_(u).call(this,o,new O({color:11184861})))).frustumCulled=!1,t.drop=new f.Y,t.offsets=n;for(var r=0;r<3*u.numDrops;r+=3)t.resetDrop(r);return t}var e,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(u,f["z"]),e=u,(n=[{key:"onAnimationTick",value:function(t){for(var e=t.delta,n=this.geometry,o=this.offsets,r=this.position,i=16*e,a=0;a<3*u.numDrops;a+=3){o[a+1]-=i;var c=0;this.testHeight&&(c=this.testHeight(o[a]+r.x,o[a+2]+r.z)),o[a+1]<=c&&this.resetDrop(a)}n.attributes.offset.needsUpdate=!0}},{key:"resetDrop",value:function(t){var e=this.drop,n=this.offsets,o=this.position;e.set(Math.random()*(2*u.radius+1)-u.radius,0,Math.random()*(2*u.radius+1)-u.radius);var r=Math.random()*u.radius*.5;this.testHeight&&(r=Math.max(r,this.testHeight(e.x+o.x,e.z+o.z))),n[t]=e.x,n[t+1]=r,n[t+2]=e.z}},{key:"setHeightTest",value:function(t){var e=this.geometry;this.testHeight=t;for(var n=0;n<3*u.numDrops;n+=3)this.resetDrop(n);e.attributes.offset.needsUpdate=!0}}])&&j(e.prototype,n),o&&j(e,o),u}();x.numDrops=1e4,x.radius=50;var k=x;function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,A(e).call(this,new f.S(100,32,32),new f.A({color:11184810,fog:!1})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,f["z"]),e}();function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=function(t){function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=1024,n=new f.h,o=new Float32Array(3e4),r=new Float32Array(1e4),i=new f.Y,a=0;a<1e4;a+=1){i.set(Math.floor(2049*Math.random())-e,Math.floor(1025*Math.random()),Math.floor(2049*Math.random())-e).normalize().multiplyScalar(e);var c=3*a;o[c]=i.x,o[c+1]=i.y,o[c+2]=i.z,r[a]=10+Math.floor(100*Math.random())}return n.addAttribute("position",new f.g(o,3)),n.addAttribute("size",new f.g(r,1)),(t=D(this,R(u).call(this,n,new f.I({color:10066329,fog:!1,sizeAttenuation:!1})))).moon=new C,t.moon.position.set(e,512,e),t.add(t.moon),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(u,f["H"]),u}(),B=n("xeez");function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Y(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Y(this,q(e).call(this))).camera=new f.E(-.5,.5,.5,-.5,0,1),t.sprite=new B.a({width:0,height:0}),t.sprite.map.wrapS=f.k,t.sprite.map.wrapT=f.k,t.sprite.map.magFilter=f.C,t.sprite.map.minFilter=f.x,t.add(new f.U(t.sprite)),t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,f["M"]),n=e,(o=[{key:"onResize",value:function(t){var e=t.width,n=t.height,o=this.sprite,r=o.renderer,i=o.ctx,a=Math.max(e,n);r.width=a,r.height=a;var c=i.createRadialGradient(.5*a,.5*a,.6*a,.5*a,.5*a,a);c.addColorStop(0,"rgba(0, 0, 0, 0)"),c.addColorStop(1,"rgba(0, 0, 0, 1)"),i.fillStyle=c,i.beginPath(),i.rect(0,0,a,a),i.fill(),o.map.needsUpdate=!0}},{key:"render",value:function(t){t.clearDepth(),t.render(this,this.camera)}}])&&N(n.prototype,o),r&&N(n,r),e}();function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var K=function(){function i(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).mount,e=void 0===t?document.body:t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.camera=new l,this.clock=new f.l,this.mount=e,this.renderer=new f.cb({alpha:!1,antialias:!0}),this.renderer.autoClear=!1,this.renderer.setAnimationLoop(this.onAnimate.bind(this)),this.renderer.setPixelRatio(window.devicePixelRatio||1);var n=new f.m(3359829);this.renderer.setClearColor(n),e.appendChild(this.renderer.domElement),this.root=new f.M,this.root.fog=new f.s(n,.03),this.root.add(new f.a(3355443));var o=new f.p(16777215,.6);o.position.set(1,.5,1),this.root.add(o);var r=new f.p(16777215,.4);r.position.set(-1,-.5,1),this.root.add(r),this.root.add(this.camera.root),this.grid=new b({background:new f.m(3355460)}),this.root.add(this.grid),this.rain=new k,this.root.add(this.rain),this.starfield=new G,this.root.add(this.starfield),this.vignette=new U,window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize()}var t,e,n;return t=i,n=[{key:"fixThreeJSFog",value:function(){f.N.fog_pars_vertex=f.N.fog_pars_vertex.replace("varying float fogDepth;","varying vec4 fogDepth;"),f.N.fog_vertex=f.N.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = mvPosition;"),f.N.fog_pars_fragment=f.N.fog_pars_fragment.replace("varying float fogDepth;","varying vec4 fogDepth;"),f.N.fog_fragment=f.N.fog_fragment.replace("float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );",["float fogDist = length(fogDepth);","float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDist * fogDist * LOG2 ) );"].join("\n")).replace("float fogFactor = smoothstep( fogNear, fogFar, fogDepth );","float fogFactor = smoothstep( fogNear, fogFar, length(fogDepth) );")}}],(e=[{key:"onAnimate",value:function(){var t=this.clock,e=this.camera,n=this.grid,o=this.renderer,r=this.root,i=this.starfield,a=this.stats,c=this.vignette;a&&a.begin();var u={delta:Math.min(t.getDelta(),1),time:t.oldTime/1e3};this.onAnimationTick&&this.onAnimationTick(u),r.children.forEach(function(t){t.onAnimationTick&&t.onAnimationTick(u)}),e.onAnimationTick&&e.onAnimationTick(u),n.position.set(e.root.position.x,0,e.root.position.z),i.position.copy(n.position),o.clear(),o.render(r,e),c.render(o),a&&a.end()}},{key:"onResize",value:function(){var t=this.camera,e=this.mount,n=this.renderer,o=this.vignette,r=e.getBoundingClientRect(),i=r.width,a=r.height;n.setSize(i,a),t.aspect=i/a,t.updateProjectionMatrix(),o.onResize({width:i,height:a})}}])&&W(t.prototype,e),n&&W(t,n),i}();K.fixThreeJSFog(),f.K.DefaultInterpolation=f.w,f.ab.DefaultInterpolation=f.w;e.a=K},0:function(t,e,n){n("FlHw"),t.exports=n("tjUo")},FlHw:function(t,e,n){},"JqL+":function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var r=function(){function r(t){var e=this,n=t.toggle;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var o=document.createElement("script");o.async=!0,o.defer=!0,o.src="https://connect.soundcloud.com/sdk/sdk-3.3.1.js",document.body.appendChild(o),function t(){window.SC?(e.api=window.SC,e.api.initialize({client_id:"eb5fcff9e107aab508431b4c3c416415"}),e.tracks=r.shuffle([14281750,135099881,14449372,201545618,130450594,43516158,20969172,29561041,6582510,89379153,96594845,199889475,137188503,74658085,90256034,183847047,3916883]),e.track=0,n.addEventListener("click",function(){return e.toggle(n)},!1),e.wantsToPlay&&(delete e.wantsToPlay,e.play())):setTimeout(t,10)}()}return i(r,null,[{key:"shuffle",value:function(t){for(var e=t.length-1;0<=e;e-=1){var n=Math.floor(Math.random()*t.length),o=t[e];t[e]=t[n],t[n]=o}return t}}]),i(r,[{key:"next",value:function(){this.track=(this.track+1)%this.tracks.length,this.play()}},{key:"play",value:function(){var e=this,t=this.api,n=this.player,o=this.track,r=this.tracks;if(t){n&&(n.kill(),delete this.player);var i=r[o];0,t.stream("/tracks/".concat(i)).then(function(t){(e.player=t).on("audio_error",function(){return e.next()}),t.on("finish",function(){return e.next()}),t.setVolume(.8),t.play()}).catch(function(){e.next()})}else this.wantsToPlay=!0}},{key:"toggle",value:function(t){var e=this.player;e&&(e.isPlaying()?(e.pause(),t.className="muted"):(t.className="",e.play()))}}]),r}();e.a=r},Tsvs:function(t,e,n){"use strict";var r=n("Womt"),o=n("1339"),i=n.n(o),a=n("fWck");function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u=function(){function o(t){var e=t.mount,n=void 0===e?document.body:e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.mount=n,this.pointer={current:new r.X(0,0),movement:{x:0,y:0},normalized:new r.X(0,0),last:new r.X(0,0),raycaster:new r.L,wheel:0},this.touches=i()(window,{preventSimulated:!1,target:n}).on("start",this.onPointerDown.bind(this)).on("move",this.onPointerMove.bind(this)).on("end",this.onPointerUp.bind(this)),Object(a.addWheelListener)(window,this.onPointerWheel.bind(this)),window.addEventListener("contextmenu",function(t){return t.preventDefault()},!1),window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize()}var t,e,n;return t=o,(e=[{key:"getPointerFrame",value:function(){var t=this.pointer,e=function(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o})}return r}({},t);return t.primaryDown=!1,t.primaryUp=!1,t.secondaryDown=!1,t.secondaryUp=!1,t.movement={x:0,y:0},t.wheel=0,e}},{key:"onPointerDown",value:function(t){var e=this.isEnabled,n=this.pointer;if(e){var o=t.button,r=t.touches;if(r)return 1<r.length&&t.preventDefault(),void(n.secondary||(1===r.length?(n.primary=!0,n.primaryDown=!0):(n.secondary=!0,n.secondaryDown=!0,n.primary=!1)));switch(o){case 0:n.primary=!0,n.primaryDown=!0;break;case 2:n.secondary=!0,n.secondaryDown=!0}}}},{key:"onPointerMove",value:function(t,e){var n=t.touches,o=b(e,2),r=o[0],i=o[1],a=this.isEnabled,c=this.pointer,u=this.rect;if(a){if(n){for(var s=u.top,f=u.left,l=i=r=0;l<n.length;l+=1){var p=n[l];r+=p.clientX-f,i+=p.clientY-s}r/=n.length,i/=n.length}var h=u.width,y=u.height;c.current.x=r,c.current.y=i,c.normalized.x=r/h*2-1,c.normalized.y=1-i/y*2,c.movement={x:c.current.x-c.last.x,y:c.current.y-c.last.y},c.last.copy(c.current)}}},{key:"onPointerUp",value:function(t){var e=t.button,n=t.touches,o=this.isEnabled,r=this.pointer;if(o){if(n)return r.primary&&(r.primary=!1,r.primaryUp=!0),void(r.secondary&&(r.secondary=!1,r.secondaryUp=!0));switch(e){case 0:r.primary=!1,r.primaryUp=!0;break;case 2:r.secondary=!1,r.secondaryUp=!0}}}},{key:"onPointerWheel",value:function(t){var e=t.deltaY,n=this.isEnabled,o=this.pointer;n&&(o.wheel=e)}},{key:"onResize",value:function(){var t=this.mount;this.rect=t.getBoundingClientRect()}}])&&c(t.prototype,e),n&&c(t,n),o}();e.a=u},gaOq:function(t,e,n){"use strict";n.r(e);var b=n("Womt"),i=n("xeez");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var r=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=c(this,u(e).call(this,new i.a({width:512,height:64,depthTest:!1})))).scale.set(2,.25,1),t.visible=!1,t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,b["U"]),n=e,(o=[{key:"display",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1500,o=this.material,r=o.renderer,i=o.ctx,a=r.width,c=r.height;i.clearRect(0,0,a,c),i.fillStyle="#fff",i.textAlign="center",i.textBaseline="middle",i.shadowColor="rgba(0, 0, 0, 0.5)",i.shadowBlur=10,i.font="24px 'Print Char 21',monospace",i.fillText(t.shift(),.5*a,.5*c),this.material.map.needsUpdate=!0,this.visible=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){t.length?e.display(t,n):e.visible=!1},n)}}])&&a(n.prototype,o),r&&a(n,r),e}();function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var y=function(t){function y(t){var n,e,o,r=t.collisionGeometry,i=t.geometry,a=t.material;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),e=this,o=v(y).call(this,i,a),n=!o||"object"!==m(o)&&"function"!=typeof o?w(e):o;var c=new b.d;n.add(c);var u=new b.d;c.add(u);var s=new b.d;u.add(s);var f=new b.d;u.add(f);var l=new b.d;u.add(l);var p=new b.d;c.add(p);var h=new b.d;return c.add(h),n.bind(new b.Q([c,u,s,f,l,p,h])),n.mixer=new b.c(w(w(n))),n.actions=Object.keys(y.animations).reduce(function(t,e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(t){d(e,t,n[t])})}return e}({},t,d({},e,n.mixer.clipAction(y.animations[e])))},{}),n.animation="idle",n.actions.idle.timeScale=.5,n.actions.idle.play(),n.rotationAux=new b.X,n.movementAux=new b.Y,n.collisionMesh=new b.z(r,new b.A({opacity:.1,transparent:!0,visible:!1,wireframe:!0})),n.add(n.collisionMesh),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(y,b["R"]),p(y,null,[{key:"geometryFromLimbs",value:function(t){var n=new b.t;Object.keys(t).forEach(function(e){t[e].faces.forEach(function(t){t.materialIndex=y.Bones[e]}),n.merge(t[e])}),n.faces.forEach(function(t){n.vertices[t.a].bone=t.materialIndex,n.vertices[t.b].bone=t.materialIndex,n.vertices[t.c].bone=t.materialIndex,t.materialIndex=0}),n.vertices.forEach(function(t){n.skinIndices.push(new b.Z(t.bone,0,0,0)),n.skinWeights.push(new b.Z(1,0,0,0))});var e=(new b.h).fromGeometry(n);return e.computeVertexNormals(),e.computeBoundingSphere(),e}}]),p(y,[{key:"onAnimationTick",value:function(t){var e=t.delta,n=this.actions.walk.timeScale,o=this.destinationMarker,r=this.mixer,i=this.movementAux,a=this.position,c=this.rotationSpeed,u=this.route,s=this.targetRotation;if(r.update(e),void 0!==s){var f=e*c,l=s-this.rotation.y;this.rotation.y+=Math.min(Math.max(l,-f),f),Math.abs(l)<=f&&delete this.targetRotation}if(u){var p=u.path[u.current],h=a.distanceTo(p),y=1.5*e*n;if(a.add(i.copy(p).sub(a).normalize().multiplyScalar(Math.min(h,y))),!(y<h)){if(u.current<u.path.length-1)return u.current+=1,void this.faceTo(u.path[u.current]);this.setAnimation("idle"),delete this.route,o&&(o.visible=!1),this.onDestinationCallback&&(this.onDestinationCallback(),delete this.onDestinationCallback)}}}},{key:"setAnimation",value:function(t){var e=this.actions;this.animation!==t&&(e[this.animation].fadeOut(.2),this.animation=t,e[this.animation].reset().fadeIn(.2).play())}},{key:"walk",value:function(t,e){var n=this.destinationMarker,o=this.position.distanceTo(t[t.length-1]);delete this.onDestinationCallback,0!==o?(this.setAnimation("walk"),this.route={current:0,path:t},n&&(n.position.copy(t[t.length-1]),n.visible=!0),e&&(this.onDestinationCallback=e),this.faceTo(t[0])):e&&e()}},{key:"faceTo",value:function(t){for(var e=this.position,n=this.rotationAux.set(t.x-e.x,t.z-e.z).angle();this.rotation.y<-Math.PI;)this.rotation.y+=2*Math.PI;for(;this.rotation.y>Math.PI;)this.rotation.y-=2*Math.PI;for(this.targetRotation=.5*Math.PI-n;this.targetRotation<-Math.PI;)this.targetRotation+=2*Math.PI;for(;this.targetRotation>Math.PI;)this.targetRotation-=2*Math.PI;this.targetRotation-this.rotation.y>Math.PI?this.targetRotation-=2*Math.PI:this.targetRotation-this.rotation.y<-Math.PI&&(this.targetRotation+=2*Math.PI),this.rotationSpeed=1.5*Math.abs(this.targetRotation-this.rotation.y)}},{key:"say",value:function(t,e){this.bubble||(this.bubble=new r,this.bubble.position.set(0,2.25*this.geometry.boundingSphere.radius,0),this.add(this.bubble)),this.bubble.display(t,e)}}]),y}();y.Bones={hip:0,torso:1,head:2,leftArm:3,rightArm:4,leftLeg:5,rightLeg:6};var g=function(t,e,n){return(new b.J).setFromEuler(new b.r(t,e,n)).toArray()};y.animations={idle:new b.b("idle",1,[new b.K(".bones[".concat(y.Bones.torso,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(0,-.05*Math.PI,0)).concat(f(g(0,.05*Math.PI,0)),f(g(0,-.05*Math.PI,0))))),new b.K(".bones[".concat(y.Bones.head,"].quaternion"),new Float32Array([0,.75,1]),new Float32Array(f(g(-.075*Math.PI,0,-.025*Math.PI)).concat(f(g(-.075*Math.PI,0,.025*Math.PI)),f(g(-.075*Math.PI,0,-.025*Math.PI))))),new b.K(".bones[".concat(y.Bones.leftArm,"].quaternion"),new Float32Array([0,.75,1]),new Float32Array(f(g(0,0,-.05*Math.PI)).concat(f(g(0,0,-.1*Math.PI)),f(g(0,0,-.05*Math.PI))))),new b.K(".bones[".concat(y.Bones.rightArm,"].quaternion"),new Float32Array([0,.25,1]),new Float32Array(f(g(0,0,.05*Math.PI)).concat(f(g(0,0,.1*Math.PI)),f(g(0,0,.05*Math.PI)))))]),walk:new b.b("walk",1,[new b.K(".bones[".concat(y.Bones.torso,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(-.02*Math.PI,0,.01*Math.PI)).concat(f(g(.02*Math.PI,0,-.01*Math.PI)),f(g(-.02*Math.PI,0,.01*Math.PI))))),new b.K(".bones[".concat(y.Bones.head,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(0,0,-.025*Math.PI)).concat(f(g(0,0,.025*Math.PI)),f(g(0,0,-.025*Math.PI))))),new b.K(".bones[".concat(y.Bones.leftArm,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(.1*Math.PI,0,0)).concat(f(g(-.1*Math.PI,0,-.1*Math.PI)),f(g(.1*Math.PI,0,0))))),new b.K(".bones[".concat(y.Bones.rightArm,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(-.1*Math.PI,0,.1*Math.PI)).concat(f(g(.1*Math.PI,0,0)),f(g(-.1*Math.PI,0,.1*Math.PI))))),new b.K(".bones[".concat(y.Bones.leftLeg,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(-.15*Math.PI,0,.01*Math.PI)).concat(f(g(.15*Math.PI,0,-.01*Math.PI)),f(g(-.15*Math.PI,0,.01*Math.PI))))),new b.K(".bones[".concat(y.Bones.rightLeg,"].quaternion"),new Float32Array([0,.5,1]),new Float32Array(f(g(.15*Math.PI,0,-.01*Math.PI)).concat(f(g(-.15*Math.PI,0,.01*Math.PI)),f(g(.15*Math.PI,0,-.01*Math.PI)))))])};var O=y;function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var M=function(t){function i(t){var e,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this;var r=_(_(e=!(o=j(i).call(this,{collisionGeometry:new b.n(.25,.25,1.4).translate(0,.7,0),geometry:i.geometry(t),material:i.material}))||"object"!==P(o)&&"function"!=typeof o?_(n):o)).skeleton.bones;return Object.keys(i.bones).forEach(function(t){r[O.Bones[t]].position.copy(i.bones[t])}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(i,O),i}();M.bones={hip:new b.Y(0,.5,0),torso:new b.Y(0,0,0),head:new b.Y(0,.49,0),leftArm:new b.Y(-.15,.475,0),rightArm:new b.Y(.15,.475,0),leftLeg:new b.Y(-.075,0,0),rightLeg:new b.Y(.075,0,0)},M.geometry=function(e){var t=new b.o(.175,.15,.5,6);t.translate(0,.25,0),t.faces.forEach(function(t){t.color.set(e.torso||10027008)});var n=new b.T(.2,8,4);if(n.translate(0,.2,0),n.faces.forEach(function(t){t.color.set(e.head)}),e.hat){var o=new b.o(.3,.3,.05),r=new b.o(.2,.2,.3);r.translate(0,.15,0),o.merge(r),o.translate(0,.3,0),o.faces.forEach(function(t){t.color.set(e.hat)}),n.merge(o)}var i=new b.T(.05);i.faces.forEach(function(t){t.color.set(e.eyes)});var a=i.clone();i.translate(-.1,.2,.15),a.translate(.1,.2,.15),n.merge(i),n.merge(a);var c=new b.o(.05,.03,.4,6);c.faces.forEach(function(t){t.color.set(e.arms)});var u=c.clone();c.translate(0,-.2,0),u.translate(0,-.2,0);var s=new b.o(.05,.05,.5,4);s.faces.forEach(function(t){t.color.set(e.legs)});var f=s.clone();s.translate(0,-.25,0),f.translate(0,-.25,0);var l=O.geometryFromLimbs({torso:t,head:n,leftArm:c,rightArm:u,leftLeg:s,rightLeg:f});return l.boundingSphere.center.set(0,.7,0),l.boundingSphere.radius=.7,l},M.material=new b.B({skinning:!0,vertexColors:b.bb});var x=M;function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function T(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=new b.j(.25,16);return e.rotateX(-.5*Math.PI),e.translate(0,.001,0),(t=T(this,A(n).call(this,e,new b.B({color:2236962,transparent:!0})))).visible=!1,t}var e,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(n,b["z"]),e=n,(o=[{key:"onAnimationTick",value:function(t){var e=t.time,n=this.material,o=this.scale;if(this.visible){var r=.125*(1+Math.sin(4*e)),i=.75+r;o.set(i,1,i),n.opacity=.25+r}}}])&&E(e.prototype,o),r&&E(e,r),n}();function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R=function(t){var i=t.input,a=t.scene,c={dudes:D(Array(13)).map(function(t,e){var n=new x({arms:2236962,eyes:0===e?10027008:10066329*Math.random(),head:0===e?3355443:10066329*Math.random(),hat:.5<Math.random()&&10066329*Math.random(),legs:2236962,torso:0===e?10027008:10066329*Math.random()});return n.position.set(Math.floor((e+1)/2)*((e+1)%2==0?1:-1),0,0),a.root.add(n),n}),onAnimationTick:function(){var t=a.camera,e=a.grid,n=i.getPointerFrame();if(t.processInput(n),n.primaryUp){var o=n.raycaster;o.setFromCamera(n.normalized,t);var r=o.intersectObject(e)[0];if(!r)return;c.walkTo(r.point)}},walkTo:function(n){var o=n.x,r=n.z;this.dudes.forEach(function(t,e){n.x=o+Math.floor((e+1)/2)*((e+1)%2==0?1:-1),n.z=r+-1*Math.floor((e+1)/2),0<e&&(n.x+=2*Math.random()-1,n.z+=2*Math.random()-1,t.actions.walk.timeScale=.8+.4*Math.random()),t.walk([n.clone()])})}},e=z(c.dudes,1)[0];e.destinationMarker=new C,a.root.add(e.destinationMarker),a.camera.target=e.position,a.camera.distance=6,a.camera.pitch=.125*Math.PI,a.camera.updateOrbit(),a.onAnimationTick=c.onAnimationTick.bind(c)};function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(t){function a(t){var e=t.color,n=t.scale;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var o=new b.f(.998,.999,.998,n.x,n.y,n.z),r=new b.m;o.faces.forEach(function(t,e){e%2==0&&r.setHSL(Math.random(),.05,.25+.125*Math.random()),t.color.copy(r)}),o.translate(0,.5,0);for(var i=0;i<12;i+=1)o.faces.splice(40,1);return o.scale(n.x,n.y,n.z),G(this,B(a).call(this,(new b.h).fromGeometry(o),new b.B({color:e,side:b.q,vertexColors:b.bb})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(a,b["z"]),a}();function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function H(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var K=function(t){function i(t){var e,n=t.onTap,o=t.position;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new b.e(.2,.1,.1);return r.translate(0,0,.049),(e=H(this,U(i).call(this,r,new b.B({color:4456448})))).animation=0,e.animationVector=new b.Y(0,0,-.05),e.onTap=n,e.position.copy(o),e.origin=o.clone(),e}var e,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(i,b["z"]),e=i,(n=[{key:"tap",value:function(){var t,e=this.onTap;return!this.tapping&&(e&&(t=e()),this.animation=0,this.tapping=!0,t)}},{key:"onAnimationTick",value:function(t){var e=t.delta,n=this.animationVector,o=this.origin;if(this.tapping){this.animation=Math.min(this.animation+.75*e,1),1===this.animation&&delete this.tapping;var r=b.y.smoothstep(2*(.5<this.animation?1-this.animation:this.animation),0,1);this.position.copy(o).addScaledVector(n,r)}}}])&&q(e.prototype,n),o&&q(e,o),i}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function J(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function f(t){var e,n=t.color,o=t.onCall,r=t.scale;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),e=J(this,Z(f).call(this));var i=new b.G(.5,1,.5*r.x,r.y),a=new b.m;i.faces.forEach(function(t,e){e%2==0&&a.setHSL(Math.random(),.05,.25+.125*Math.random()),t.color.copy(a)}),i.scale(r.x,r.y,r.z);for(var c=(new b.h).fromGeometry(i),u=0;u<2;u+=1){var s=new b.z(c,new b.B({color:n,side:b.q,vertexColors:b.bb}));s.position.set((.52*u-.26)*r.x,.5*r.y,.499*r.z),e.add(s)}return e.animation=0,e.animationScale=r.x,e.state=f.states.CLOSED,e.targetState=e.state,e.callButton=new K({onTap:o,position:new b.Y(.6*r.x,1/3*r.y,.5*r.z)}),e.add(e.callButton),e}var e,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(f,b["D"]),e=f,(n=[{key:"open",value:function(){this.state=f.states.MOVING,this.targetState=f.states.OPEN}},{key:"close",value:function(){this.state=f.states.MOVING,this.targetState=f.states.CLOSED}},{key:"toggle",value:function(){switch(this.state){case f.states.OPEN:this.close();break;case f.states.CLOSED:this.open()}}},{key:"onAnimationTick",value:function(t){var e=this.animationScale,n=this.children,o=this.state,r=this.targetState;if(this.callButton.onAnimationTick(t),o===f.states.MOVING){var i=.75*t.delta;switch(r){case f.states.OPEN:this.animation=Math.min(this.animation+i,1),1===this.animation&&(this.state=f.states.OPEN);break;case f.states.CLOSED:this.animation=Math.max(this.animation-i,0),0===this.animation&&(this.state=f.states.CLOSED)}for(var a=.4*b.y.smoothstep(this.animation,0,1),c=0;c<2;c+=1)n[c].position.x=(.52*c-.26+a*(0===c?-1:1))*e}}}])&&X(e.prototype,n),o&&X(e,o),f}();$.states={OPEN:0,CLOSED:1,MOVING:2};var tt=$;function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){function s(t){var e=t.color,n=t.floors,o=t.scale;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=new b.t,i=0;i<=n;i+=1){if(0===i||i===n){var a=new b.G(1,1);if(a.rotateX(-.5*Math.PI),a.translate(0,i,0),r.merge(a),i===n)break}var c=new b.G(1,1);c.translate(0,i+.5,-.5),r.merge(c);var u=new b.G(1,1);u.rotateY(-.5*Math.PI),u.translate(-.5,i+.5,0),r.merge(u),u.translate(1,0,0),r.merge(u)}return r.scale(o.x,o.y,o.z),nt(this,ot(s).call(this,(new b.h).fromGeometry(r),new b.B({color:e,side:b.q})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(s,b["z"]),s}();function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ut(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pt=function(t){function i(t){var o,e=t.floors,n=t.origin;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=st(this,ft(i).call(this))).floors=e,o.origin=n,o.animationStart=512*Math.random(),o.shaft=new it({color:i.shaft,floors:e,scale:i.scale}),o.add(o.shaft),o.doors=ct(Array(e)).map(function(t,e){var n=new tt({color:i.doors,onCall:function(){return o.onCall(e)},scale:i.scale});return n.position.y=e*i.scale.y,o.add(n),n}),o.cabin=new N({color:i.cabin,scale:i.scale}),o.add(o.cabin),o.position.z=-1.5*i.scale.z,o.floor=0,o}var e,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(i,b["D"]),e=i,(n=[{key:"onAnimationTick",value:function(e){var t=this.cabin,n=this.doors,o=this.route;if(o){o.step+=.75*e.delta,1<=o.step&&(o.step=1,n[o.to].open(),this.floor=o.to,delete this.route);var r=b.y.smoothstep(o.step,0,1)*o.travel;t.position.y=(o.from+r)*i.scale.y}n.forEach(function(t){return t.onAnimationTick(e)})}},{key:"onCall",value:function(t){var e=this.route,n=this.doors;e||(t!==this.floor?(n[this.floor].close(),this.route={from:this.floor,to:t,travel:t-this.floor,step:0}):n[t].toggle())}}])&&ut(e.prototype,n),o&&ut(e,o),i}();pt.scale=new b.Y(2,3,2),pt.cabin=4456448,pt.doors=3355443,pt.shaft=3355443;var ht=pt,yt=n("seR1");function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dt(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ot=function(t){var e,n,o;function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.aoTop,n=void 0!==e&&e,o=t.aoBottom,r=void 0!==o&&o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var i=h.getGeometry({aoTop:n,aoBottom:r,orientation:"vertical",material:0});return i.translate(0,.5,-.5),i.scale(h.scale.x,h.scale.y,h.scale.z),dt(this,vt(h).call(this,(new b.h).fromGeometry(i),new b.B({side:b.q,vertexColors:b.bb})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(h,b["z"]),e=h,o=[{key:"getGeometry",value:function(t){var e=t.aoTop,r=void 0===e||e,n=t.aoBottom,i=void 0===n||n,o=t.width,a=void 0===o?1:o,c=t.height,u=void 0===c?1:c,s=t.material,f=t.orientation,l=new b.G(a,u,Math.ceil(a*h.scale.x),Math.ceil(u*("horizontal"===f?h.scale.x:h.scale.y))),p=new b.m;return l.faces.forEach(function(t,e){e%2==0&&p.setHSL(Math.random(),.05,.25+.125*Math.random()),t.materialIndex=s;var o=[l.vertices[t.a],l.vertices[t.b],l.vertices[t.c]];t.vertexColors=mt(Array(3)).map(function(t,e){var n=p.clone();return(r&&Math.abs(o[e].y-.5*u)<1e-4||i&&Math.abs(o[e].y- -.5*u)<1e-4)&&n.offsetHSL(0,0,-.1),n})}),"horizontal"===f&&l.rotateX(-.5*Math.PI),l}}],(n=null)&&wt(e.prototype,n),o&&wt(e,o),h}();Ot.scale=new b.Y(4,3,4);var Pt=Ot;function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function l(t){var e=t.hasCeiling,n=t.hasElevator,o=t.isEdge,r=t.isLobby;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var i=new b.t,a=Pt.getGeometry({aoBottom:!r,material:0,orientation:"horizontal"});if(i.merge(a),n){var c=Pt.getGeometry({aoTop:e,width:.25,material:1});c.translate(-.375,.5,-.5),i.merge(c),c.translate(.75,0,0),i.merge(c)}else{var u=Pt.getGeometry({aoTop:e,material:1});u.translate(0,.5,-.5),i.merge(u)}if(!r){var s=Pt.getGeometry({aoTop:!1,height:1/3,material:1});if(s.rotateY(Math.PI),s.translate(0,1/3/2,.5),i.merge(s),o){var f=Pt.getGeometry({aoTop:!1,height:1/3,material:1});f.rotateY(.5*Math.PI*("left"===o?1:-1)),f.translate("left"===o?-.5:.5,1/3/2,0),i.merge(f)}}return i.scale(Pt.scale.x,Pt.scale.y,Pt.scale.z),St(this,_t(l).call(this,(new b.h).fromGeometry(i),[new yt.a({side:b.q,vertexColors:b.bb}),new b.B({side:b.q,vertexColors:b.bb})]))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(l,b["z"]),l}(),kt=n("vV97");function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function At(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function It(t,e){return!e||"object"!==Et(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dt=function(t){function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=new b.t,o=new b.G(1024,1024,2,2);o.rotateX(-.5*Math.PI),o.translate(0,0,512);var r=new b.G(1024,1024,2,2);return r.translate(0,512,0),n.merge(o),n.merge(r),(e=It(this,Ct(i).call(this,(new b.h).fromGeometry(n),new b.A({transparent:!0,visible:!1})))).finder=new kt.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0}),e.grid=new kt.Grid(t),e.grid.setWalkableAt(0,1,!0),e}var e,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(i,b["z"]),e=i,(n=[{key:"getPath",value:function(t,e){var r=this,n=this.grid,o=this.finder;return t=this.worldToGrid(t),e=this.worldToGrid(e),o.findPath(t.x,t.z,e.x,e.z,n.clone()).map(function(t){var e=Tt(t,2),n=e[0],o=e[1];return r.localToWorld(new b.Y(n+.5,0,o+.5))})}},{key:"worldToGrid",value:function(t){var e=this.grid,n=this.position;for(t.y=n.y,this.worldToLocal(t),t.x=Math.min(Math.max(t.x,0),e.width-1),t.z=Math.min(Math.max(t.z,0),e.height-1),t={x:Math.floor(t.x),z:Math.floor(t.z)};!e.isWalkableAt(t.x,t.z)&&t.z<e.height-1;)t.z+=1;return t}}])&&At(e.prototype,n),o&&At(e,o),i}();function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bt(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=function(t){function o(t){var b,e=t.elevators,m=t.floors;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(b=Bt(this,Lt(o).call(this))).elevators=e.map(function(t){var e=t.floors,n=t.origin,o=new ht({floors:e,origin:n});return o.position.x=4*n.x,o.position.y=3*n.y,b.add(o),o});var n=m.reduce(function(t,e){return Math.max(t,4*e.split("").length)},0);return b.heightmap=Ft(Array(6)).map(function(){return Ft(Array(n)).map(function(){return 0})}),b.floors=m.map(function(t,l){var p=[],h=t.split(""),y=Ft(Array(4)).map(function(){return Ft(Array(4*h.length)).map(function(){return 1})});h.forEach(function(t,o){var e;switch(t){case" ":return;case"_":e=new Pt;break;case".":default:var n=!1;0===o||~[" ","_"].indexOf(h[o-1])?n="left":(o===h.length-1||~[" ","_"].indexOf(h[o+1]))&&(n="right");var r=l<m.length-1&&-1===[" ","_"].indexOf(m[l+1].split("")[o]),i=b.elevators.findIndex(function(t){var e=t.floors,n=t.origin;return n.x===o&&n.y<=l&&n.y+e>l}),a=~i;if(a){var c=b.elevators[i];p.push(c.doors[l-c.origin.y].callButton)}e=new xt({hasCeiling:r,hasElevator:a,isEdge:n,isLobby:0===l});for(var u=0;u<4;u+=1){for(var s=0;s<6;s+=1)1<s?b.heightmap[s][4*o+u]=3*l:a&&0<u&&u<3&&(b.heightmap[s][4*o+u]=3*(l+1));for(var f=0;f<4;f+=1)y[f][4*o+u]=0}}e.position.set(4*o,3*l,0),b.add(e)});var e=new Dt(y);return e.buttons=p,e.position.set(-2,3*l,-2),b.add(e),e}),b}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(o,b["D"]),e=o,(n=[{key:"addToFloorGrid",value:function(t){var e=t.floor,n=t.mesh,o=t.x,r=t.z,i=this.floors[e];i.grid.setWalkableAt(o,r,!1),n.position.set(o+.5,0,r+.5).add(i.position),this.add(n)}},{key:"getHeight",value:function(t,e){var n=this.heightmap;return t=Math.floor(t+2),e=Math.floor(e+4),t<0||t>n[0].length-1||e<0||e>n.length-1?0:n[e][t]}},{key:"onAnimationTick",value:function(e){this.children.forEach(function(t){t.onAnimationTick&&t.onAnimationTick(e)})}}])&&Gt(e.prototype,n),r&&Gt(e,r),o}();function qt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ht=function(t){var m=t.input,d=t.scene,v=new x({arms:2236962,eyes:10027008,head:3355443,legs:2236962,torso:10027008});v.position.set(6,3,0),v.destinationMarker=new C,d.root.add(v),d.root.add(v.destinationMarker),d.camera.maxHeight=2.9,d.camera.target=v.position;var w=new Yt({elevators:[{floors:2,origin:{x:2,y:0}},{floors:3,origin:{x:4,y:1}}],floors:["  ..."," .._..","..._..","......"," ...."].reverse()});d.root.add(w),d.rain.position.x=.5*w.heightmap[0].length,d.rain.setHeightTest(w.getHeight.bind(w));var g=qt(Array(4)).map(function(){for(var t,e=new x({arms:2236962,eyes:10066329*Math.random(),hat:.5<Math.random()&&10066329*Math.random(),head:10066329*Math.random(),legs:2236962,torso:10066329*Math.random()}),n=Math.floor(2*Math.random()),o=w.floors[n].grid;t={x:Math.floor(Math.random()*o.width),z:Math.floor(Math.random()*o.height-1)},!o.isWalkableAt(t.x,t.z););return w.addToFloorGrid(function(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o})}return r}({floor:n,mesh:e},t)),e.collisionMesh.floor=n,e.collisionMesh}).reduce(function(t,e){return t[e.floor]||(t[e.floor]=[]),t[e.floor].push(e),t},{});d.onAnimationTick=function(){var t=d.camera,e=m.getPointerFrame();if(t.processInput(e),e.primaryUp){var n=e.raycaster;n.setFromCamera(e.normalized,t);var o=w.floors[1],r=n.intersectObjects(g[1])[0];if(r){var i=r.object.parent,a=["Fuck You","Go away","Leave me alone"],c=function(){v.faceTo(i.position),setTimeout(function(){return i.say([a[Math.floor(Math.random()*a.length)]])},500)},u=o.getPath(v.position.clone(),i.position.clone());return void(1<u.length?v.walk(u.slice(1),c):u.length&&c())}var s=n.intersectObjects(o.buttons)[0];if(s){var f=s.point,l=s.object,p=function(){v.faceTo(f),l.tap()},h=o.getPath(v.position.clone(),f.clone());return void(1<h.length?v.walk(h.slice(1),p):h.length&&p())}var y=n.intersectObject(o)[0];if(y){var b=o.getPath(v.position.clone(),y.point);1<b.length&&v.walk(b.slice(1))}}}};n.d(e,"debug",function(){return R}),n.d(e,"game",function(){return Ht})},seR1:function(t,e,n){"use strict";var y=n("Womt");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function m(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.color,o=void 0===n?16777215:n,r=e.size,i=void 0===r?1:r,a=e.subdivisions,c=void 0===a?10:a,u=b(e,["color","size","subdivisions"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var s=y.O.phong.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","varying vec3 vPosition;"].join("\n")).replace("#include <fog_vertex>",["#include <fog_vertex>","vPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;"].join("\n")),f=1/i,l=f*c,p=y.O.phong.fragmentShader.replace("#include <clipping_planes_pars_fragment>",["#include <clipping_planes_pars_fragment>","varying vec3 vPosition;","float getGrid(float scale) {"," vec2 coord = vPosition.xz * scale;"," vec2 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);"," return 1.0 - min(min(grid.x, grid.y), 1.0);","}"].join("\n")).replace("vec4 diffuseColor = vec4( diffuse, opacity );",["float primaryGrid = getGrid(".concat(f).concat(f%1==0?".0":"",");"),"float secondaryGrid = getGrid(".concat(l).concat(l%1==0?".0":"",");"),"vec3 grid = mix(mix(diffuse, diffuse * 0.95, secondaryGrid), diffuse * 1.15, primaryGrid);","vec4 diffuseColor = vec4(grid, opacity);"].join("\n"));return(t=m(this,d(h).call(this,function(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o})}return r}({name:"grid-material-".concat(i,"-").concat(c),uniforms:y.W.clone(y.O.phong.uniforms),fragmentShader:p,vertexShader:s,extensions:{derivatives:!0},fog:!0,lights:!0},u)))).color=t.uniforms.diffuse.value,t.color.set(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(h,y["P"]),h}();e.a=i},tjUo:function(t,e,p){"use strict";p.r(e),function(t){var i,a,e=p("Tsvs"),n=p("JqL+"),o=p("/LCC"),c=p("gaOq"),r=document.getElementById("mount"),u=new e.a({mount:r}),s=new n.a({toggle:document.getElementById("sound")}),f=new o.a({mount:r}),l=window.location.hash.split("/").slice(1)[0];c[l]||(window.location.hash="/game",l="game"),t(function(){return window.addEventListener("hashchange",function(){return window.location.reload()},!1)}),a=0,(i=[{font:"'Print Char 21'",test:"QW@HhsXJ"}]).forEach(function(t){var e=t.font,n=t.test,o=document.createElement("div");o.innerText=n,o.style.position="absolute",o.style.fontFamily="sans-serif",o.style.top="-999999px",document.body.appendChild(o);var r=o.getBoundingClientRect().width;o.style.fontFamily=e,function t(){var e=o.getBoundingClientRect().width;r<e?(document.body.removeChild(o),(a+=1)===i.length&&(document.body.className="loaded",c[l]({input:u,scene:f}),u.touches.once("end",function(){document.getElementById("splash").style.display="none",u.isEnabled=!0,s.play()}))):setTimeout(t,10)}()})}.call(this,p("URgk").setImmediate)},xeez:function(t,e,n){"use strict";var u=n("Womt");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){function c(t){var e,n=t.width,o=t.height,r=s(t,["width","height"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var i=document.createElement("canvas");i.width=n,i.height=o;var a=new u.i(i);return(e=f(this,l(c).call(this,function(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,o;e=r,o=i[n=t],n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o})}return r}({map:a},r)))).renderer=i,e.ctx=i.getContext("2d"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,u["V"]),c}();e.a=i}},[[0,1,2]]]);
//# sourceMappingURL=main.1ed143d6f36a5ee091c2de377eec83db.js.map